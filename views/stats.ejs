<div class="mb-6">
  <h2 class="text-lg font-semibold dark:text-slate-100">ğŸ“Š EstadÃ­sticas de Productividad</h2>
  <p class="text-sm text-slate-600 dark:text-slate-400 mt-1">Resumen de tu actividad y progreso</p>
</div>

<!-- MÃ©tricas principales -->
<div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
  <div class="bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl p-4">
    <div class="text-xs text-slate-600 dark:text-slate-400">Total Items</div>
    <div class="text-2xl font-bold mt-1 dark:text-slate-100"><%= stats.total %></div>
  </div>
  <div class="bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl p-4">
    <div class="text-xs text-slate-600 dark:text-slate-400">Activos</div>
    <div class="text-2xl font-bold mt-1 text-blue-600 dark:text-blue-400"><%= stats.active %></div>
  </div>
  <div class="bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl p-4">
    <div class="text-xs text-slate-600 dark:text-slate-400">Completados</div>
    <div class="text-2xl font-bold mt-1 text-emerald-600 dark:text-emerald-400"><%= stats.completed %></div>
  </div>
  <div class="bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl p-4">
    <div class="text-xs text-slate-600 dark:text-slate-400">Promedio/dÃ­a</div>
    <div class="text-2xl font-bold mt-1 text-purple-600 dark:text-purple-400"><%= avgPerDay %></div>
  </div>
</div>

<!-- Completados por perÃ­odo -->
<div class="bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl p-5 mb-6">
  <h3 class="text-base font-semibold mb-4 dark:text-slate-100">âœ… Items Completados</h3>
  <div class="grid grid-cols-3 gap-4">
    <div class="text-center">
      <div class="text-3xl font-bold text-emerald-600 dark:text-emerald-400"><%= stats.completedToday %></div>
      <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Hoy</div>
    </div>
    <div class="text-center">
      <div class="text-3xl font-bold text-emerald-600 dark:text-emerald-400"><%= stats.completedWeek %></div>
      <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Esta semana</div>
    </div>
    <div class="text-center">
      <div class="text-3xl font-bold text-emerald-600 dark:text-emerald-400"><%= stats.completedMonth %></div>
      <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Este mes</div>
    </div>
  </div>
</div>

<!-- GrÃ¡fico de Ãºltimos 7 dÃ­as -->
<div class="bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl p-5 mb-6">
  <h3 class="text-base font-semibold mb-4 dark:text-slate-100">ğŸ“ˆ Actividad (Ãšltimos 7 dÃ­as)</h3>
  <div class="flex items-end justify-between gap-2 h-40">
    <% last7Days.forEach(day => {
      const percentage = maxCount > 0 ? (day.count / maxCount) * 100 : 0;
    %>
      <div class="flex-1 flex flex-col items-center gap-2">
        <div class="w-full bg-blue-200 dark:bg-blue-900 rounded-t relative" style="height: <%= percentage %>%; min-height: <%= day.count > 0 ? '20px' : '2px' %>">
          <% if (day.count > 0) { %>
            <div class="absolute inset-0 flex items-center justify-center text-xs font-semibold text-blue-900 dark:text-blue-100">
              <%= day.count %>
            </div>
          <% } %>
        </div>
        <div class="text-[10px] text-slate-600 dark:text-slate-400 text-center"><%= day.date %></div>
      </div>
    <% }); %>
  </div>
</div>

<!-- Items por lista -->
<div class="bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl p-5">
  <h3 class="text-base font-semibold mb-4 dark:text-slate-100">ğŸ“‹ DistribuciÃ³n por Lista</h3>
  <div class="space-y-3">
    <%
      const listLabels = {
        'collect': 'ğŸ“¥ Collect',
        'hacer': 'âœ… Hacer',
        'agendar': 'ğŸ“… Agendar',
        'delegar': 'ğŸ¤ Delegar',
        'desglosar': 'ğŸ”¨ Desglosar',
        'no-hacer': 'ğŸš« No hacer',
      };

      const maxListCount = Math.max(...Object.values(byList), 1);

      Object.keys(byList).forEach(listKey => {
        const count = byList[listKey];
        const percentage = (count / maxListCount) * 100;
    %>
      <div>
        <div class="flex items-center justify-between text-sm mb-1">
          <span class="dark:text-slate-100"><%= listLabels[listKey] || listKey %></span>
          <span class="font-semibold dark:text-slate-100"><%= count %></span>
        </div>
        <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2">
          <div class="bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all" style="width: <%= percentage %>%"></div>
        </div>
      </div>
    <% }); %>
  </div>
</div>

<!-- Botones de acciÃ³n -->
<div class="mt-6 flex flex-wrap gap-2">
  <a href="/" class="px-4 py-2 rounded-lg border dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm">
    â† Volver al Dashboard
  </a>
  <a href="/export" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors text-sm">
    ğŸ“¥ Exportar Datos
  </a>
</div>
