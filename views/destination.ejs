<h2 class="text-lg font-semibold dark:text-slate-100"><%= section.label %></h2>
<p class="text-sm text-slate-600 dark:text-slate-400 mt-1"><%= section.hint %></p>

<div class="mt-4 space-y-3">
  <% if (!items.length) { %>
    <div class="bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl overflow-hidden">
      <div class="empty-state m-4">
        <div class="text-4xl mb-3"><%= section.key === 'no-hacer' ? 'ðŸš«' : 'ðŸ“‹' %></div>
        <div class="text-base font-semibold text-slate-700 dark:text-slate-200 mb-2">Sin elementos aquÃ­ por ahora</div>
        <div class="text-sm text-slate-600 dark:text-slate-400 mb-4">
          Los items que asignes a "<%= section.label %>" desde Collect aparecerÃ¡n aquÃ­.
        </div>
        <a href="/collect" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-all text-sm font-medium hover:shadow-md">
          <span>ðŸ“¥</span>
          <span>Ir a Collect</span>
        </a>
      </div>
    </div>
  <% } %>

  <% for (const it of items) { %>
    <div class="bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl p-4">
      <div class="font-medium text-sm dark:text-slate-100"><%= it.title || it.input %></div>
      <% if (it.notes) { %>
        <div class="text-xs text-slate-500 dark:text-slate-400 mt-1 whitespace-pre-wrap"><%= it.notes %></div>
      <% } %>
      <form method="POST" action="/items/<%= it.id %>/delete" class="mt-3">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
        <button type="button" onclick="confirmAction('Â¿Eliminar este elemento?', function(){ this.closest ? document.activeElement.closest('form').submit() : null })" class="text-sm px-3 py-1 rounded-lg bg-white dark:bg-slate-700 border dark:border-slate-600 text-red-700 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors delete-item-btn">Eliminar</button>
      </form>
    </div>
  <% } %>
</div>

<script nonce="<%= cspNonce %>">
  document.querySelectorAll('.delete-item-btn').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var form = btn.closest('form');
      confirmAction('Â¿Eliminar este elemento?', function() {
        form.submit();
      });
    });
  });
</script>
