<div class="flex items-center justify-between gap-3">
  <div>
    <h2 class="text-lg font-semibold">Hacer</h2>
    <p class="text-sm text-slate-600 mt-1">Solo acciones rápidas (&lt;10 min), ordenadas por prioridad.</p>
  </div>
  <a href="/collect" class="text-sm px-3 py-1.5 rounded-lg border bg-white hover:bg-slate-50">Ir a Collect</a>
</div>

<div class="mt-4 rounded-xl border bg-white overflow-hidden">
  <div class="hidden md:grid md:grid-cols-12 px-3 py-2 text-xs text-slate-500 bg-slate-50 border-b">
    <div class="col-span-6">Acción</div>
    <div class="col-span-1 text-center">Urg</div>
    <div class="col-span-1 text-center">Imp</div>
    <div class="col-span-1 text-center">Min</div>
    <div class="col-span-1 text-center">Pri</div>
    <div class="col-span-2 text-right"> </div>
  </div>

  <% if (!items.length) { %>
    <div class="p-5 text-sm text-slate-600">
      No hay acciones en Hacer. <a href="/collect" class="underline">Enviar desde Collect</a>
    </div>
  <% } %>

  <% for (const it of items) { %>
    <div class="border-b last:border-b-0 px-3 py-2.5">
      <form method="POST" action="/hacer/<%= it.id %>/update" class="grid grid-cols-1 md:grid-cols-12 gap-2 items-center">
        <% if (needApiKey) { %><input type="hidden" name="apiKey" value="<%= apiKey || '' %>" /><% } %>

        <div class="md:col-span-6">
          <input type="text" name="title" value="<%= it.title || it.input %>" class="w-full border rounded-lg px-2.5 py-2 text-sm" />
          <% if (!it.actionableOk) { %>
            <div class="mt-1 text-xs text-amber-700"><%= it.actionableFeedback || 'Mejorar redacción' %></div>
          <% } %>
        </div>

        <div class="md:col-span-1">
          <input type="number" min="1" max="5" name="urgency" value="<%= it.urgency || 3 %>" class="w-full border rounded-lg px-2 py-2 text-sm text-center" />
        </div>

        <div class="md:col-span-1">
          <input type="number" min="1" max="5" name="importance" value="<%= it.importance || 3 %>" class="w-full border rounded-lg px-2 py-2 text-sm text-center" />
        </div>

        <div class="md:col-span-1">
          <input type="number" min="1" max="10" name="estimateMin" value="<%= it.estimateMin || 10 %>" class="w-full border rounded-lg px-2 py-2 text-sm text-center" />
        </div>

        <div class="md:col-span-1 text-center">
          <span class="inline-flex min-w-10 justify-center px-2 py-1 rounded-lg border bg-slate-50 text-sm"><%= it.priorityScore || '-' %></span>
        </div>

        <div class="md:col-span-2 md:text-right flex md:justify-end gap-2">
          <% if (it.actionableOk) { %>
            <span class="hidden md:inline text-xs px-2 py-1 rounded border border-green-200 bg-green-50 text-green-700">Accionable</span>
          <% } %>
          <button class="text-sm px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">Guardar</button>
        </div>
      </form>
    </div>
  <% } %>
</div>
